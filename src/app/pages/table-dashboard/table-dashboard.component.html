<ion-content>
  <div class="ion-padding">
    <div
      style="
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0 16px;
      "
    >
      <div>
        <h2>Hello, {{ username }}</h2>
        <p>Select a table</p>
      </div>
      <div>
        <ion-button fill="outline" (click)="cycleColumns()" shape="round">
          <ion-icon [name]="currentIcon" slot="icon-only"></ion-icon>
        </ion-button>
      </div>
    </div>

    <ion-segment
      mode="ios"
      [(ngModel)]="filter"
      value="all"
      style="margin: 8px 0"
    >
      <ion-segment-button value="all">All</ion-segment-button>
      <ion-segment-button value="open">Open</ion-segment-button>
      <ion-segment-button value="closed">Closed</ion-segment-button>
      <ion-segment-button value="reserved">Reserved</ion-segment-button>
    </ion-segment>

    <ion-searchbar
      [(ngModel)]="searchTerm"
      debounce="300"
      placeholder="Search tables"
    ></ion-searchbar>
  </div>

  <div class="tables-container">
    <div
      class="table-grid"
      [ngStyle]="{ 'grid-template-columns': 'repeat(' + columns + ', 1fr)' }"
    >
      <ng-container *ngFor="let table of filteredTables">
        <div class="table-card" [ngClass]="'view-' + columns">
          <!-- 1 Column View -->
          <ng-container *ngIf="columns === 1">
            <div class="status-row">
              <div
                *ngFor="let status of statuses"
                class="status-pill"
                [ngClass]="getStatusClasses(status, table.status)"
              >
                {{ status }}
              </div>
            </div>

            <div class="info-row">
              <div>User {{ table.user }}</div>
              <div class="table-meta">
                <span>{{ table.name }}</span>
                <span class="price">{{ table.price | currency }}</span>
              </div>
            </div>
          </ng-container>

          <!-- 2 Column View -->
          <ng-container *ngIf="columns === 2">
            <div class="status-dot" [ngClass]="table.status"></div>
            <div>User {{ table.user }}</div>
            <div>{{ table.name }}</div>
            <div class="price">{{ table.price | currency }}</div>
          </ng-container>

          <!-- 3 Column View -->
          <ng-container *ngIf="columns === 3">
            <div class="status-bar" [ngClass]="table.status"></div>
            <div>User {{ table.user }}</div>
            <div>{{ table.name }}</div>
            <div class="price">{{ table.price | currency }}</div>
          </ng-container>
        </div>
      </ng-container>
    </div>
  </div>
</ion-content>
