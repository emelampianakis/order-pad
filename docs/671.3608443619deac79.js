"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[671],{7671:(D,u,c)=>{c.r(u),c.d(u,{OrderDetailsComponent:()=>v});var _=c(467),g=c(2881),l=c(7531),O=c(980),t=c(1360),C=c(6352),f=c(6048),P=c(8490);function M(o,d){if(1&o&&(t.j41(0,"div",15),t.nrm(1,"ion-icon",16),t.EFF(2),t.k0s()),2&o){const a=t.XpG();t.R7$(2),t.SpI("",a.selectedTable.user," ")}}function b(o,d){if(1&o&&(t.j41(0,"div",17)(1,"div",18),t.EFF(2," Created at "),t.j41(3,"span"),t.EFF(4),t.nI1(5,"date"),t.k0s()(),t.j41(6,"div",19),t.EFF(7," Total Price "),t.j41(8,"span"),t.EFF(9),t.nI1(10,"currency"),t.k0s()()()),2&o){const a=t.XpG();t.R7$(4),t.JRh(t.i5U(5,2,a.selectedOrder.createdAt,"yyyy-MM-dd HH:mm")),t.R7$(5),t.JRh(t.bMT(10,5,a.selectedOrder.price))}}function m(o,d){if(1&o&&(t.j41(0,"div",20)(1,"div",21),t.EFF(2," Order ID "),t.j41(3,"span"),t.EFF(4),t.k0s()(),t.j41(5,"div",22),t.EFF(6),t.k0s()()),2&o){const a=t.XpG();t.R7$(4),t.JRh(a.selectedOrder.id),t.R7$(),t.Y8G("ngClass",a.selectedOrder.paid?"paid":"not-paid"),t.R7$(),t.SpI(" ",a.selectedOrder.paid?"PAID":"NOT PAID"," ")}}function h(o,d){if(1&o&&(t.j41(0,"ion-item")(1,"ion-label")(2,"div",27),t.EFF(3),t.k0s(),t.j41(4,"div",28),t.EFF(5),t.nI1(6,"currency"),t.k0s()()()),2&o){const a=d.$implicit;t.R7$(3),t.JRh(a.label),t.R7$(2),t.Lme(" Quantity: ",a.quantity," \xa0|\xa0 Price: ",t.bMT(6,3,a.price)," ")}}function x(o,d){if(1&o&&(t.j41(0,"div",23)(1,"span",24),t.EFF(2,"Products"),t.k0s(),t.j41(3,"ion-list",25),t.DNE(4,h,7,5,"ion-item",26),t.k0s()()),2&o){const a=t.XpG();t.R7$(4),t.Y8G("ngForOf",a.order.orderProducts)}}let v=(()=>{var o;class d{constructor(n,e,i,r,s,p){this.route=n,this.location=e,this.alertCtrl=i,this.dataService=r,this.loadingController=s,this.router=p}ngOnInit(){var n,e;const i=this.route.snapshot.paramMap.get("id");this.fetchOrder(i);const r=this.router.getCurrentNavigation();this.selectedTable=null==r||null===(n=r.extras.state)||void 0===n?void 0:n.table,this.selectedOrder=null==r||null===(e=r.extras.state)||void 0===e?void 0:e.order}goBack(){this.location.back()}fetchOrder(n){var e=this;return(0,_.A)(function*(){const i=yield e.loadingController.create({message:"Loading order details..."});if(yield i.present(),!n)return console.error("No order ID found in route."),void(yield i.dismiss());var r;e.dataService.getOrder(n).pipe((0,O.j)(()=>{i.dismiss()})).subscribe({next:(r=(0,_.A)(function*(s){e.order=s.data,console.log(s)}),function(p){return r.apply(this,arguments)}),error:function(){var r=(0,_.A)(function*(s){console.error(s)});return function(p){return r.apply(this,arguments)}}()})})()}deleteOrder(){var n=this;return(0,_.A)(function*(){yield(yield n.alertCtrl.create({header:"Confirm Deletion",message:"Are you sure you want to delete this order?",buttons:[{text:"No",role:"cancel",handler:()=>{}},{text:"Yes",handler:()=>{n.onDeleteOrder()}}]})).present()})()}onDeleteOrder(){var n=this;return(0,_.A)(function*(){const e=yield n.loadingController.create({message:"Deleting order..."});var i;yield e.present(),n.dataService.deleteOrder(n.order.id).pipe((0,O.j)(()=>{e.dismiss()})).subscribe({next:(i=(0,_.A)(function*(r){console.log(r),n.goBack()}),function(s){return i.apply(this,arguments)}),error:function(){var i=(0,_.A)(function*(r){console.error(r)});return function(s){return i.apply(this,arguments)}}()})})()}getStatusClassName(n){return n.replace(/ /g,"")}}return(o=d).\u0275fac=function(n){return new(n||o)(t.rXU(C.nX),t.rXU(f.aZ),t.rXU(l.hG),t.rXU(P.u),t.rXU(l.Xi),t.rXU(C.Ix))},o.\u0275cmp=t.VBU({type:o,selectors:[["app-order-details"]],decls:18,vars:7,consts:[["fullscreen","",1,"table-details-content"],["fill","outline","shape","round",1,"light-button","back-btn",3,"click"],["name","chevron-back-outline","slot","icon-only"],[1,"header-container"],[1,"header-card"],[1,"table-info"],[1,"status"],[1,"status-dot",3,"ngClass"],["class","user",4,"ngIf"],[1,"table-name"],[1,"sheet-container"],["class","order-meta-top",4,"ngIf"],["class","order-meta-bottom",4,"ngIf"],["class","products-section",4,"ngIf"],["expand","block","color","danger",2,"position","absolute","bottom","16px","width","calc(100% - 32px)","left","16px","z-index","99","margin","0",3,"click"],[1,"user"],["name","person-circle-outline"],[1,"order-meta-top"],[1,"created-at"],[1,"total"],[1,"order-meta-bottom"],[1,"order-id"],[3,"ngClass"],[1,"products-section"],[2,"color","black","font-size","24px"],["mode","ios","lines","none"],[4,"ngFor","ngForOf"],[1,"product-name"],[1,"product-meta"]],template:function(n,e){1&n&&(t.j41(0,"ion-content",0)(1,"ion-button",1),t.bIt("click",function(){return e.goBack()}),t.nrm(2,"ion-icon",2),t.k0s(),t.j41(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6),t.nrm(7,"span",7),t.EFF(8),t.k0s(),t.DNE(9,M,3,1,"div",8),t.k0s(),t.j41(10,"div",9),t.EFF(11),t.k0s()()(),t.j41(12,"div",10),t.DNE(13,b,11,7,"div",11)(14,m,7,3,"div",12)(15,x,5,1,"div",13),t.k0s(),t.j41(16,"ion-button",14),t.bIt("click",function(){return e.deleteOrder()}),t.EFF(17,"Cancel Order"),t.k0s()()),2&n&&(t.R7$(7),t.Y8G("ngClass",e.getStatusClassName(e.selectedTable.status)),t.R7$(),t.SpI(" ",e.selectedTable.status," "),t.R7$(),t.Y8G("ngIf",e.selectedTable.user),t.R7$(2),t.JRh(e.selectedTable.label),t.R7$(2),t.Y8G("ngIf",e.selectedOrder),t.R7$(),t.Y8G("ngIf",e.selectedOrder),t.R7$(),t.Y8G("ngIf",e.order))},dependencies:[g.MD,g.YU,g.Sq,g.bT,g.oe,g.vh,l.W9,l.Jm,l.iq,l.nf,l.uz,l.he],styles:[".table-details-content[_ngcontent-%COMP%]{--padding-top: 0;position:relative}.table-details-content[_ngcontent-%COMP%]   ion-button.back-btn[_ngcontent-%COMP%]{position:absolute;top:16px;left:16px;z-index:1000}.table-details-content[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]{position:absolute;top:0;width:100%;background:linear-gradient(to top,#0c4a6e,#06b6d4)}.table-details-content[_ngcontent-%COMP%]   .header-card[_ngcontent-%COMP%]{color:#000;position:relative;z-index:2;margin:40px auto 0;width:50%;max-width:500px;background:#fff;border-radius:10px;padding:16px;box-shadow:0 4px 16px #0003;text-align:center;display:flex;flex-direction:column;gap:32px}.table-details-content[_ngcontent-%COMP%]   .header-card[_ngcontent-%COMP%]   .table-info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.table-details-content[_ngcontent-%COMP%]   .header-card[_ngcontent-%COMP%]   .table-info[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{display:flex;align-items:center;font-weight:700;text-transform:capitalize;gap:8px}.table-details-content[_ngcontent-%COMP%]   .header-card[_ngcontent-%COMP%]   .table-info[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]   .status-dot[_ngcontent-%COMP%]{width:10px;height:10px;border-radius:50%;background-color:#666}.table-details-content[_ngcontent-%COMP%]   .header-card[_ngcontent-%COMP%]   .table-info[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]   .status-dot.available[_ngcontent-%COMP%]{background-color:#10dc60}.table-details-content[_ngcontent-%COMP%]   .header-card[_ngcontent-%COMP%]   .table-info[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]   .status-dot.notavailable[_ngcontent-%COMP%]{background-color:#eb445a}.table-details-content[_ngcontent-%COMP%]   .header-card[_ngcontent-%COMP%]   .table-info[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]   .status-dot.reserved[_ngcontent-%COMP%]{background-color:#ffc409}.table-details-content[_ngcontent-%COMP%]   .header-card[_ngcontent-%COMP%]   .table-name[_ngcontent-%COMP%]{font-size:22px;font-weight:700}.table-details-content[_ngcontent-%COMP%]   .sheet-container[_ngcontent-%COMP%]{position:absolute;left:0;right:0;bottom:0;top:100px;background:#e1eff4;border-top-left-radius:24px;border-top-right-radius:24px;padding:64px 16px 80px;overflow-y:auto;z-index:1;display:flex;flex-direction:column;gap:16px}.table-details-content[_ngcontent-%COMP%]   .sheet-container[_ngcontent-%COMP%]   .order-meta-top[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:24px;color:#000}.table-details-content[_ngcontent-%COMP%]   .sheet-container[_ngcontent-%COMP%]   .order-meta-top[_ngcontent-%COMP%]   .created-at[_ngcontent-%COMP%], .table-details-content[_ngcontent-%COMP%]   .sheet-container[_ngcontent-%COMP%]   .order-meta-top[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.table-details-content[_ngcontent-%COMP%]   .sheet-container[_ngcontent-%COMP%]   .order-meta-bottom[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:24px;color:#000}.table-details-content[_ngcontent-%COMP%]   .sheet-container[_ngcontent-%COMP%]   .order-id[_ngcontent-%COMP%]{font-size:24px;display:flex;flex-direction:column;gap:8px;color:#000}.table-details-content[_ngcontent-%COMP%]   .sheet-container[_ngcontent-%COMP%]   .products-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.table-details-content[_ngcontent-%COMP%]   .sheet-container[_ngcontent-%COMP%]   .products-section[_ngcontent-%COMP%]   .product-name[_ngcontent-%COMP%]{font-weight:500}.table-details-content[_ngcontent-%COMP%]   .sheet-container[_ngcontent-%COMP%]   .products-section[_ngcontent-%COMP%]   .product-meta[_ngcontent-%COMP%]{font-size:13px;color:#666}.table-details-content[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px;background:transparent}.table-details-content[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{color:#000;--background: white;border-radius:5px}.table-details-content[_ngcontent-%COMP%]   .paid[_ngcontent-%COMP%]{color:green;font-weight:700}.table-details-content[_ngcontent-%COMP%]   .not-paid[_ngcontent-%COMP%]{color:red;font-weight:700}"]}),d})()}}]);