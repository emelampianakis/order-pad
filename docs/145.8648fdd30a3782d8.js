"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[145],{1145:(V,b,p)=>{p.r(b),p.d(b,{TableDetailsComponent:()=>X});var d=p(467),s=p(2881),e=p(1360),a=p(7531),h=p(980),u=p(4341),g=p(4843),m=p(8490);function C(i,l){if(1&i){const o=e.RV6();e.j41(0,"ion-item",12),e.bIt("click",function(){const t=e.eBV(o).$implicit,r=e.XpG();return e.Njj(r.toggleOrder(t))}),e.j41(1,"ion-label")(2,"div",13),e.EFF(3),e.nI1(4,"date"),e.k0s(),e.j41(5,"div",14),e.EFF(6),e.nI1(7,"date"),e.nrm(8,"br"),e.EFF(9),e.nI1(10,"currency"),e.j41(11,"span",15),e.EFF(12,"NOT PAID"),e.k0s()()(),e.nrm(13,"ion-checkbox",16),e.k0s()}if(2&i){const o=l.$implicit,n=e.XpG();e.R7$(3),e.JRh(e.i5U(4,4,o.createdAt,"HH:mm")),e.R7$(3),e.SpI(" ",e.i5U(7,7,o.createdAt,"dd-MM-yyyy"),""),e.R7$(3),e.SpI(" ",e.bMT(10,10,o.price)," "),e.R7$(4),e.Y8G("checked",n.isChecked(o))}}let O=(()=>{var i;class l{constructor(n){this.dataService=n,this.orders=[],this.selectedOrders=[],this.allChecked=!1,this.modalCtrl=(0,e.WQX)(a.W3)}toggleAll(){this.selectedOrders=this.allChecked?[...this.orders]:[]}isChecked(n){return this.selectedOrders.includes(n)}toggleOrder(n){this.isChecked(n)?this.selectedOrders=this.selectedOrders.filter(t=>t!==n):this.selectedOrders.push(n)}getTotal(){return this.selectedOrders.reduce((n,t)=>n+t.price,0)}submitPayment(){var n=this;return(0,d.A)(function*(){const t=n.selectedOrders.map(r=>r.id);if(t.length)try{yield(0,g._)(n.dataService.updatePaidStatus({ids:t})),n.modalCtrl.dismiss({paid:!0})}catch(r){console.error("Payment update failed:",r)}})()}}return(i=l).\u0275fac=function(n){return new(n||i)(e.rXU(m.u))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-pay-order-modal"]],inputs:{orders:"orders"},decls:23,vars:6,consts:[[1,"modal-wrapper"],["scrollY","true"],[1,"total-box"],[1,"label"],[1,"amount"],[1,"sticky-top"],[1,"top-controls"],[3,"ngModelChange","ionChange","ngModel"],["mode","ios","lines","none"],[3,"click",4,"ngFor","ngForOf"],[1,"modal-footer"],["expand","block",3,"click","disabled"],[3,"click"],[1,"order-time"],[1,"order-meta"],[1,"not-paid"],["slot","end",3,"checked"]],template:function(n,t){1&n&&(e.j41(0,"div",0)(1,"ion-header")(2,"ion-toolbar")(3,"ion-title"),e.EFF(4,"Payment"),e.k0s()()(),e.j41(5,"ion-content",1)(6,"div",2)(7,"div",3),e.EFF(8,"Total"),e.k0s(),e.j41(9,"div",4),e.EFF(10),e.nI1(11,"currency"),e.k0s()(),e.j41(12,"div",5)(13,"div",6)(14,"span"),e.EFF(15,"Select Orders"),e.k0s(),e.j41(16,"ion-checkbox",7),e.mxI("ngModelChange",function(c){return e.DH7(t.allChecked,c)||(t.allChecked=c),c}),e.bIt("ionChange",function(){return t.toggleAll()}),e.EFF(17,"All"),e.k0s()()(),e.j41(18,"ion-list",8),e.DNE(19,C,14,12,"ion-item",9),e.k0s()(),e.j41(20,"ion-footer",10)(21,"ion-button",11),e.bIt("click",function(){return t.submitPayment()}),e.EFF(22," Payment "),e.k0s()()()),2&n&&(e.R7$(10),e.JRh(e.bMT(11,4,t.getTotal())),e.R7$(6),e.R50("ngModel",t.allChecked),e.R7$(3),e.Y8G("ngForOf",t.orders),e.R7$(2),e.Y8G("disabled",0===t.selectedOrders.length))},dependencies:[s.MD,s.Sq,s.oe,s.vh,u.YN,u.BC,u.vS,a.Jm,a.eY,a.W9,a.M0,a.eU,a.uz,a.he,a.nf,a.BC,a.ai],styles:["[_nghost-%COMP%]{display:block;height:90vh;background:#fff;color:#000}.modal-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:90vh}ion-content[_ngcontent-%COMP%]{--background: #fff;flex:1;overflow-y:auto}ion-toolbar[_ngcontent-%COMP%]{--background: white;--color: black}ion-item[_ngcontent-%COMP%]{--background: white}ion-checkbox[_ngcontent-%COMP%]{--checkbox-background-checked: grey;--checkbox-background: #f0f0f0}ion-checkbox[_ngcontent-%COMP%]::part(container){border:2px solid grey}.total-box[_ngcontent-%COMP%]{background:#e6f8fc;margin:16px;padding:16px;text-align:center;border:1px solid #cce;border-radius:8px}.total-box[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:500;color:#444;font-size:14px}.total-box[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{font-size:28px;font-weight:700;color:#000}.sticky-top[_ngcontent-%COMP%]{color:#000;position:sticky;top:0;background:#fff;z-index:10;padding:12px 16px;border-bottom:1px solid #ddd}.top-controls[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.modal-footer[_ngcontent-%COMP%]{padding:16px;border-top:1px solid #ddd;background:#fff;box-shadow:0 -2px 6px #0000001a}.order-time[_ngcontent-%COMP%]{font-size:1.2em;font-weight:700;color:#000}.order-meta[_ngcontent-%COMP%]{font-size:.9em;color:#666}.not-paid[_ngcontent-%COMP%]{color:red;font-weight:700}"]}),l})();function k(i,l){if(1&i){const o=e.RV6();e.j41(0,"ion-item",12),e.bIt("click",function(){const t=e.eBV(o).$implicit,r=e.XpG();return e.Njj(r.toggleOrder(t))}),e.j41(1,"ion-label")(2,"div",13),e.EFF(3),e.nI1(4,"date"),e.k0s(),e.j41(5,"div",14),e.EFF(6),e.nI1(7,"date"),e.nrm(8,"br"),e.EFF(9),e.nI1(10,"currency"),e.j41(11,"span",15),e.EFF(12,"NOT PAID"),e.k0s()()(),e.nrm(13,"ion-checkbox",16),e.k0s()}if(2&i){const o=l.$implicit,n=e.XpG();e.R7$(3),e.JRh(e.i5U(4,4,o.createdAt,"HH:mm")),e.R7$(3),e.SpI(" ",e.i5U(7,7,o.createdAt,"dd-MM-yyyy"),""),e.R7$(3),e.SpI(" ",e.bMT(10,10,o.price)," "),e.R7$(4),e.Y8G("checked",n.isChecked(o))}}function M(i,l){if(1&i&&(e.j41(0,"ion-select-option",17),e.EFF(1),e.k0s()),2&i){const o=l.$implicit;e.Y8G("value",o.id),e.R7$(),e.JRh(o.label)}}let P=(()=>{var i;class l{constructor(n,t){this.modalCtrl=n,this.dataService=t,this.orders=[],this.selectedOrders=[],this.availableTables=[],this.selectedTableId=null,this.allChecked=!1}ngOnInit(){var n=this;return(0,d.A)(function*(){const t=yield(0,g._)(n.dataService.getTables());n.availableTables=t.data.items||[]})()}toggleAll(){this.selectedOrders=this.allChecked?[...this.orders]:[]}isChecked(n){return this.selectedOrders.includes(n)}toggleOrder(n){this.isChecked(n)?this.selectedOrders=this.selectedOrders.filter(t=>t!==n):this.selectedOrders.push(n)}submitTransfer(){var n=this;return(0,d.A)(function*(){const t=n.availableTables.find(c=>c.id===n.selectedTableId);if(!t||0===n.selectedOrders.length)return;const r={ids:n.selectedOrders.map(c=>c.id),table:{id:t.id,label:t.label,status:t.status,totalUnpaidPrice:t.totalUnpaidPrice||0}};try{yield n.dataService.updateOrdersTable(r).toPromise(),n.modalCtrl.dismiss({transferred:!0})}catch(c){console.error("Transfer failed:",c)}})()}}return(i=l).\u0275fac=function(n){return new(n||i)(e.rXU(a.W3),e.rXU(m.u))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-transfer-order-modal"]],inputs:{orders:"orders"},decls:20,vars:5,consts:[[1,"modal-wrapper"],["scrollY","true"],[1,"sticky-top"],[1,"top-controls"],[3,"ngModelChange","ionChange","ngModel"],["mode","ios","lines","none"],[3,"click",4,"ngFor","ngForOf"],[1,"modal-footer"],["lines","none",1,"footer-select"],["mode","md","justify","end","label","New Table:","placeholder","Select Table",1,"footer-select-control",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["expand","block",3,"click","disabled"],[3,"click"],[1,"order-time"],[1,"order-meta"],[1,"not-paid"],["slot","end",3,"checked"],[3,"value"]],template:function(n,t){1&n&&(e.j41(0,"div",0)(1,"ion-header")(2,"ion-toolbar")(3,"ion-title"),e.EFF(4,"Transfer"),e.k0s()()(),e.j41(5,"ion-content",1)(6,"div",2)(7,"div",3)(8,"b"),e.EFF(9,"Select Orders"),e.k0s(),e.j41(10,"ion-checkbox",4),e.mxI("ngModelChange",function(c){return e.DH7(t.allChecked,c)||(t.allChecked=c),c}),e.bIt("ionChange",function(){return t.toggleAll()}),e.EFF(11,"ALL"),e.k0s()()(),e.j41(12,"ion-list",5),e.DNE(13,k,14,12,"ion-item",6),e.k0s()(),e.j41(14,"ion-footer",7)(15,"ion-item",8)(16,"ion-select",9),e.mxI("ngModelChange",function(c){return e.DH7(t.selectedTableId,c)||(t.selectedTableId=c),c}),e.DNE(17,M,2,2,"ion-select-option",10),e.k0s()(),e.j41(18,"ion-button",11),e.bIt("click",function(){return t.submitTransfer()}),e.EFF(19," Transfer Orders "),e.k0s()()()),2&n&&(e.R7$(10),e.R50("ngModel",t.allChecked),e.R7$(3),e.Y8G("ngForOf",t.orders),e.R7$(3),e.R50("ngModel",t.selectedTableId),e.R7$(),e.Y8G("ngForOf",t.availableTables),e.R7$(),e.Y8G("disabled",!t.selectedTableId||0===t.selectedOrders.length))},dependencies:[s.MD,s.Sq,s.oe,s.vh,u.YN,u.BC,u.vS,a.Jm,a.eY,a.W9,a.M0,a.eU,a.uz,a.he,a.nf,a.Nm,a.Ip,a.BC,a.ai],styles:["[_nghost-%COMP%]{display:block;height:90vh;background:#fff;color:#000}.modal-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:90vh}ion-content[_ngcontent-%COMP%]{--background: #fff;flex:1;overflow-y:auto}ion-toolbar[_ngcontent-%COMP%]{--background: white;--color: black}ion-item[_ngcontent-%COMP%]{--background: white}ion-checkbox[_ngcontent-%COMP%]{--checkbox-background-checked: grey;--checkbox-background: #f0f0f0}ion-checkbox[_ngcontent-%COMP%]::part(container){border:2px solid grey}.sticky-top[_ngcontent-%COMP%]{color:#000;position:sticky;top:0;background:#fff;z-index:10;padding:12px 16px;border-bottom:1px solid #ddd}.top-controls[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.modal-footer[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;padding:16px;border-top:1px solid #ddd;background:#fff;box-shadow:0 -2px 6px #0000001a}.footer-label[_ngcontent-%COMP%]{color:#000;font-weight:500}.footer-select[_ngcontent-%COMP%]{justify-content:space-between;align-items:center}.footer-select-control[_ngcontent-%COMP%]{color:#000}.order-time[_ngcontent-%COMP%]{font-size:1.2em;font-weight:700;color:#000}.order-meta[_ngcontent-%COMP%]{font-size:.9em;color:#666}.not-paid[_ngcontent-%COMP%]{color:red;font-weight:700}"]}),l})();function v(i,l){if(1&i&&(e.j41(0,"ion-badge",14),e.EFF(1),e.k0s()),2&i){const o=e.XpG();e.R7$(),e.SpI(" ",o.cartItemCount," ")}}function y(i,l){if(1&i&&(e.qex(0),e.j41(1,"span",20),e.EFF(2," > "),e.k0s(),e.j41(3,"span",17),e.EFF(4),e.k0s(),e.bVm()),2&i){const o=l.$implicit;e.R7$(4),e.JRh(o.name)}}function x(i,l){if(1&i&&(e.qex(0),e.j41(1,"span",20),e.EFF(2," > "),e.k0s(),e.j41(3,"span",17),e.EFF(4),e.k0s(),e.bVm()),2&i){const o=e.XpG(2);e.R7$(4),e.JRh(o.selectedProduct.label||o.selectedProduct.name)}}function T(i,l){if(1&i&&(e.j41(0,"div",15),e.nrm(1,"ion-icon",16),e.j41(2,"span",17),e.EFF(3,"Categories"),e.k0s(),e.DNE(4,y,5,1,"ng-container",18)(5,x,5,1,"ng-container",19),e.k0s()),2&i){const o=e.XpG();e.R7$(4),e.Y8G("ngForOf",o.breadcrumb),e.R7$(),e.Y8G("ngIf","product-details"===o.view&&o.selectedProduct)}}function F(i,l){1&i&&(e.j41(0,"div",21),e.nrm(1,"ion-spinner",22),e.k0s())}function j(i,l){if(1&i){const o=e.RV6();e.j41(0,"ion-item",25),e.bIt("click",function(){const t=e.eBV(o).$implicit,r=e.XpG(2);return e.Njj(r.navigateToCategory(t))}),e.EFF(1),e.k0s()}if(2&i){const o=l.$implicit;e.R7$(),e.SpI(" ",o.label||o.name," ")}}function I(i,l){if(1&i&&(e.j41(0,"ion-list",23),e.DNE(1,j,2,1,"ion-item",24),e.k0s()),2&i){const o=e.XpG();e.R7$(),e.Y8G("ngForOf",o.currentCategories)}}function R(i,l){if(1&i){const o=e.RV6();e.j41(0,"ion-item",28)(1,"ion-label")(2,"div",29)(3,"div",30),e.EFF(4),e.k0s(),e.j41(5,"div",31),e.EFF(6),e.nI1(7,"currency"),e.k0s()(),e.j41(8,"div",32)(9,"ion-button",33),e.bIt("click",function(){const t=e.eBV(o).$implicit,r=e.XpG(2);return e.Njj(r.viewProduct(t))}),e.EFF(10," View "),e.k0s(),e.j41(11,"div",34)(12,"ion-button",35),e.bIt("click",function(){const t=e.eBV(o).$implicit,r=e.XpG(2);return e.Njj(r.decreaseQuantity(t))}),e.EFF(13,"-"),e.k0s(),e.nrm(14,"ion-input",36),e.j41(15,"ion-button",35),e.bIt("click",function(){const t=e.eBV(o).$implicit,r=e.XpG(2);return e.Njj(r.increaseQuantity(t))}),e.EFF(16,"+"),e.k0s(),e.j41(17,"ion-button",37),e.bIt("click",function(){const t=e.eBV(o).$implicit,r=e.XpG(2);return e.Njj(r.addToCart(t))}),e.EFF(18," Add "),e.k0s()()()()()}if(2&i){const o=l.$implicit,n=e.XpG(2);e.R7$(4),e.JRh(o.label||o.name),e.R7$(2),e.JRh(e.bMT(7,3,o.price)),e.R7$(8),e.Y8G("value",n.getQuantity(o))}}function w(i,l){if(1&i&&(e.j41(0,"ion-list",26),e.DNE(1,R,19,5,"ion-item",27),e.k0s()),2&i){const o=e.XpG();e.R7$(),e.Y8G("ngForOf",o.currentProducts)}}function $(i,l){if(1&i){const o=e.RV6();e.j41(0,"div",38)(1,"h2"),e.EFF(2),e.k0s(),e.j41(3,"p"),e.EFF(4),e.k0s(),e.j41(5,"p")(6,"strong"),e.EFF(7),e.nI1(8,"currency"),e.k0s()(),e.j41(9,"ion-button",39),e.bIt("click",function(){e.eBV(o);const t=e.XpG();return e.Njj(t.addToCart(t.selectedProduct))}),e.EFF(10," Add to Cart "),e.k0s()()}if(2&i){const o=e.XpG();e.R7$(2),e.JRh(null==o.selectedProduct?null:o.selectedProduct.label),e.R7$(2),e.JRh(null==o.selectedProduct?null:o.selectedProduct.description),e.R7$(3),e.JRh(e.bMT(8,3,null==o.selectedProduct?null:o.selectedProduct.price))}}function A(i,l){if(1&i){const o=e.RV6();e.j41(0,"div",51)(1,"div",52)(2,"div",53),e.EFF(3),e.k0s(),e.j41(4,"div",54),e.EFF(5),e.nI1(6,"currency"),e.j41(7,"strong"),e.EFF(8),e.nI1(9,"currency"),e.k0s()()(),e.j41(10,"div",55)(11,"ion-button",56),e.bIt("click",function(){const t=e.eBV(o).$implicit,r=e.XpG(2);return e.Njj(r.decreaseQuantity(t))}),e.EFF(12,"-"),e.k0s(),e.j41(13,"span"),e.EFF(14),e.k0s(),e.j41(15,"ion-button",56),e.bIt("click",function(){const t=e.eBV(o).$implicit;return e.Njj(t.quantity=t.quantity+1)}),e.EFF(16,"+"),e.k0s()()()}if(2&i){const o=l.$implicit;e.R7$(3),e.JRh(o.label||o.name),e.R7$(2),e.Lme(" ",e.bMT(6,5,o.price)," x ",o.quantity," = "),e.R7$(3),e.JRh(e.bMT(9,7,o.price*o.quantity)),e.R7$(6),e.JRh(o.quantity)}}function E(i,l){if(1&i&&(e.j41(0,"ion-select-option",57),e.EFF(1),e.k0s()),2&i){const o=l.$implicit;e.Y8G("value",o.id),e.R7$(),e.JRh(o.label)}}function G(i,l){if(1&i){const o=e.RV6();e.j41(0,"div",40),e.DNE(1,A,17,9,"div",41),e.j41(2,"div",42)(3,"ion-item",43)(4,"ion-label",44),e.EFF(5,"Total:"),e.k0s(),e.j41(6,"ion-note",45),e.EFF(7),e.nI1(8,"currency"),e.k0s()(),e.j41(9,"ion-item",28)(10,"ion-select",46),e.mxI("ngModelChange",function(t){e.eBV(o);const r=e.XpG();return e.DH7(r.selectedTableId,t)||(r.selectedTableId=t),e.Njj(t)}),e.DNE(11,E,2,2,"ion-select-option",47),e.k0s()(),e.j41(12,"ion-item",28)(13,"ion-checkbox",48),e.bIt("ionChange",function(t){e.eBV(o);const r=e.XpG();return e.Njj(r.isPaid=t.detail.checked)}),e.EFF(14,"Paid"),e.k0s()(),e.j41(15,"ion-button",49),e.bIt("click",function(){e.eBV(o);const t=e.XpG();return e.Njj(t.confirmOrder())}),e.EFF(16," Complete Order "),e.k0s(),e.j41(17,"ion-button",50),e.bIt("click",function(){e.eBV(o);const t=e.XpG();return e.Njj(t.clearCart())}),e.EFF(18," Clear Cart "),e.k0s()()()}if(2&i){const o=e.XpG();e.R7$(),e.Y8G("ngForOf",o.cart),e.R7$(6),e.JRh(e.bMT(8,7,o.getCartTotal())),e.R7$(3),e.R50("ngModel",o.selectedTableId),e.R7$(),e.Y8G("ngForOf",o.availableTables),e.R7$(2),e.Y8G("checked",o.isPaid),e.R7$(2),e.Y8G("disabled",0===o.cart.length),e.R7$(2),e.Y8G("disabled",0===o.cart.length)}}let D=(()=>{var i;class l{constructor(n,t,r){this.dataService=n,this.modalCtrl=t,this.alertCtrl=r,this.breadcrumb=[],this.currentCategories=[],this.currentProducts=[],this.loading=!1,this.cart=[],this.selectedProduct=null,this.view="categories",this.productQuantities={},this.selectedTableId=null,this.isPaid=!1,this.availableTables=[]}ngOnInit(){var n=this;return(0,d.A)(function*(){var t;yield n.loadRootCategories();const r=yield(0,g._)(n.dataService.getTables());n.availableTables=r.data.items||[],n.selectedTableId=(null===(t=n.availableTables[0])||void 0===t?void 0:t.id)||null})()}loadRootCategories(){var n=this;return(0,d.A)(function*(){n.loading=!0;const t=yield(0,g._)(n.dataService.getCategories());n.currentCategories=t.data.items,n.currentProducts=[],n.view="categories",n.loading=!1})()}navigateToCategory(n){var t=this;return(0,d.A)(function*(){t.loading=!0,t.breadcrumb.push({id:n.id,name:n.name||n.label||"Unnamed"});const r=yield(0,g._)(t.dataService.getSubcategories(n.id));if(r.data.items.length>0)t.currentCategories=r.data.items,t.currentProducts=[],t.view="categories";else{const c=yield(0,g._)(t.dataService.getCategoryProducts(n.id));t.currentProducts=c.data.items,t.currentCategories=[],t.view="products"}t.loading=!1})()}loadCategoryById(n){var t=this;return(0,d.A)(function*(){t.loading=!0;const r=yield(0,g._)(t.dataService.getSubcategories(n));if(r.data.items.length>0)t.currentCategories=r.data.items,t.currentProducts=[],t.view="categories";else{const c=yield(0,g._)(t.dataService.getCategoryProducts(n));t.currentProducts=c.data.items,t.currentCategories=[],t.view="products"}t.loading=!1})()}viewProduct(n){var t=this;return(0,d.A)(function*(){t.loading=!0;const r=yield(0,g._)(t.dataService.getProduct(n.id));t.selectedProduct=r.data,t.view="product-details",t.loading=!1})()}increaseQuantity(n){const t=n.id;this.productQuantities[t]=(this.productQuantities[t]||1)+1}decreaseQuantity(n){var t=this;return(0,d.A)(function*(){n.quantity>1?n.quantity--:yield(yield t.alertCtrl.create({header:"Remove Item",message:`Do you want to remove ${n.label||n.name} from the cart?`,buttons:[{text:"Cancel",role:"cancel"},{text:"Remove",role:"destructive",handler:()=>{t.removeFromCart(n)}}]})).present()})()}getQuantity(n){return this.productQuantities[n.id]||1}addToCart(n){const t=this.getQuantity(n),r=this.cart.find(c=>c.id===n.id);r?r.quantity+=t:this.cart.push({...n,quantity:t})}removeFromCart(n){this.cart=this.cart.filter(t=>t.id!==n.id)}clearCart(){var n=this;return(0,d.A)(function*(){var r;yield(yield n.alertCtrl.create({header:"Clear Cart",message:"Are you sure you want to clear the cart?",buttons:[{text:"Cancel",role:"cancel"},{text:"Clear",role:"destructive",handler:(r=(0,d.A)(function*(){n.cart=[],n.breadcrumb.length>0?yield n.loadCategoryById(n.breadcrumb[n.breadcrumb.length-1].id):yield n.loadRootCategories()}),function(){return r.apply(this,arguments)})}]})).present()})()}getCartTotal(){return this.cart.reduce((n,t)=>n+(t.quantity||1)*t.price,0)}back(){var n=this;return(0,d.A)(function*(){if("product-details"!==n.view)if("cart"!==n.view)if(n.breadcrumb.pop(),0===n.breadcrumb.length)yield n.loadRootCategories();else{const t=n.breadcrumb[n.breadcrumb.length-1];yield n.loadCategoryById(t.id)}else n.view="products";else n.view="products"})()}toggleCartView(){"cart"===this.view?this.breadcrumb.length>0?this.loadCategoryById(this.breadcrumb[this.breadcrumb.length-1].id):this.loadRootCategories():this.view="cart"}get cartToggleIcon(){return"cart"===this.view?"apps-outline":"cart-outline"}get cartItemCount(){return this.cart.reduce((n,t)=>n+(t.quantity||1),0)}confirmOrder(){this.modalCtrl.dismiss({cart:this.cart,tableId:this.selectedTableId,isPaid:this.isPaid})}}return(i=l).\u0275fac=function(n){return new(n||i)(e.rXU(m.u),e.rXU(a.W3),e.rXU(a.hG))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-add-order-modal"]],decls:19,vars:8,consts:[[1,"modal-wrapper"],["slot","start"],[3,"click"],["name","chevron-back-outline"],["slot","end"],[1,"cart-button",3,"click"],[3,"name"],["color","danger",4,"ngIf"],["class","breadcrumb",4,"ngIf"],["class","loading-spinner",4,"ngIf"],["mode","ios","lines","none","class","categories-list",4,"ngIf"],["mode","ios","lines","none","class","product-list",4,"ngIf"],["class","product-detail",4,"ngIf"],["class","cart-container",4,"ngIf"],["color","danger"],[1,"breadcrumb"],["name","apps-outline",1,"breadcrumb-icon"],[1,"breadcrumb-segment"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"breadcrumb-separator"],[1,"loading-spinner"],["name","crescent"],["mode","ios","lines","none",1,"categories-list"],["button","","lines","none",3,"click",4,"ngFor","ngForOf"],["button","","lines","none",3,"click"],["mode","ios","lines","none",1,"product-list"],["lines","none",4,"ngFor","ngForOf"],["lines","none"],[1,"product-info"],[1,"product-name"],[1,"product-price"],[1,"product-actions"],["size","small","fill","outline",3,"click"],[1,"quantity-add"],["size","small","fill","clear",3,"click"],["readonly","",2,"width","40px","text-align","center",3,"value"],["size","small","color","success",3,"click"],[1,"product-detail"],["expand","block",3,"click"],[1,"cart-container"],["class","cart-item",4,"ngFor","ngForOf"],[1,"cart-footer"],["lines","none",1,"total-row"],[1,"total-label"],["slot","end",1,"total-note"],["mode","md","justify","end","label","Table:",1,"footer-select-control",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["slot","end",3,"ionChange","checked"],["expand","block","color","primary",3,"click","disabled"],["expand","block","color","medium","fill","outline",3,"click","disabled"],[1,"cart-item"],[1,"cart-item-details"],[1,"cart-item-title"],[1,"cart-item-price"],[1,"cart-actions"],["size","small",3,"click"],[3,"value"]],template:function(n,t){1&n&&(e.j41(0,"div",0)(1,"ion-header")(2,"ion-toolbar")(3,"ion-buttons",1)(4,"ion-button",2),e.bIt("click",function(){return t.back()}),e.nrm(5,"ion-icon",3),e.k0s()(),e.j41(6,"ion-title"),e.EFF(7,"Add Order"),e.k0s(),e.j41(8,"ion-buttons",4)(9,"ion-button",5),e.bIt("click",function(){return t.toggleCartView()}),e.nrm(10,"ion-icon",6),e.k0s(),e.DNE(11,v,2,1,"ion-badge",7),e.k0s()()(),e.j41(12,"ion-content"),e.DNE(13,T,6,2,"div",8)(14,F,2,0,"div",9)(15,I,2,1,"ion-list",10)(16,w,2,1,"ion-list",11)(17,$,11,5,"div",12)(18,G,19,9,"div",13),e.k0s()()),2&n&&(e.R7$(10),e.Y8G("name",t.cartToggleIcon),e.R7$(),e.Y8G("ngIf",t.cartItemCount>0&&"cart"!==t.view),e.R7$(2),e.Y8G("ngIf","cart"!==t.view),e.R7$(),e.Y8G("ngIf",t.loading),e.R7$(),e.Y8G("ngIf",!t.loading&&"categories"===t.view),e.R7$(),e.Y8G("ngIf",!t.loading&&"products"===t.view),e.R7$(),e.Y8G("ngIf",!t.loading&&"product-details"===t.view),e.R7$(),e.Y8G("ngIf",!t.loading&&"cart"===t.view))},dependencies:[s.MD,s.Sq,s.bT,s.oe,u.YN,u.BC,u.vS,a.Jm,a.W9,a.eU,a.uz,a.he,a.nf,a.BC,a.ai,a.w2,a.QW,a.JI,a.iq,a.In,a.$w,a.Nm,a.Ip,a.eY],styles:["[_nghost-%COMP%]{display:block;height:90vh;background:#fff;color:#000}.modal-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:90vh}ion-content[_ngcontent-%COMP%]{--background: #e1eff4;flex:1;overflow-y:auto;padding:12px}ion-toolbar[_ngcontent-%COMP%], ion-header[_ngcontent-%COMP%], ion-footer[_ngcontent-%COMP%]{--background: #e1eff4;--color: #000}ion-item[_ngcontent-%COMP%]{color:#000}ion-label[_ngcontent-%COMP%], ion-note[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{color:#000}.loading-spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%;--color: black}.product-detail[_ngcontent-%COMP%]{padding:16px;text-align:center}.product-detail[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:8px}.product-detail[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:6px 0}.breadcrumb[_ngcontent-%COMP%]{display:flex;align-items:center;padding:10px;font-size:14px;color:#000;background-color:#e1eff4;flex-wrap:wrap}.breadcrumb-icon[_ngcontent-%COMP%]{margin-right:6px;font-size:16px}.breadcrumb-separator[_ngcontent-%COMP%]{margin:0 6px;color:#999}.breadcrumb-segment[_ngcontent-%COMP%]{color:#000;font-weight:500}ion-badge[_ngcontent-%COMP%]{position:absolute;top:0;right:0}ion-list[_ngcontent-%COMP%]{background:#e1eff4}.categories-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--background: #e1eff4;color:#000;border:1px solid #ccc;padding:8px 0}.product-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{padding:16px;--background: white}.product-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]::part(native){border:1px solid rgba(125,211,252,.8980392157)}.product-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;margin-bottom:8px}.product-name[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#000}.product-price[_ngcontent-%COMP%]{font-size:14px;color:#666}.product-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:8px}.quantity-add[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px}.cart-container[_ngcontent-%COMP%]{padding:12px}.cart-container[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--background: #e1eff4;color:#000}.cart-item[_ngcontent-%COMP%]{color:#000;border-bottom:1px solid #ddd;padding:12px 0;display:flex;justify-content:space-between;align-items:center}.cart-item-details[_ngcontent-%COMP%]{flex:1}.cart-item-title[_ngcontent-%COMP%]{font-weight:700}.cart-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.cart-footer[_ngcontent-%COMP%]{margin-top:20px;display:flex;flex-direction:column;gap:12px}.total-row[_ngcontent-%COMP%]{justify-content:flex-end}.total-label[_ngcontent-%COMP%]{text-align:right;font-weight:700}.total-note[_ngcontent-%COMP%]{font-weight:700;text-align:right}ion-checkbox[_ngcontent-%COMP%]{color:#000;--checkbox-background-checked: grey;--checkbox-background: #f0f0f0}ion-checkbox[_ngcontent-%COMP%]::part(container){border:2px solid grey}"]}),l})();var Y=p(6048),f=p(6352);function N(i,l){if(1&i&&(e.j41(0,"div",17),e.nrm(1,"ion-icon",18),e.EFF(2),e.k0s()),2&i){const o=e.XpG();e.R7$(2),e.SpI("",o.selectedTable.user," ")}}function S(i,l){if(1&i){const o=e.RV6();e.j41(0,"ion-item",19),e.bIt("click",function(){const t=e.eBV(o).$implicit,r=e.XpG();return e.Njj(r.goToOrderDetails(t))}),e.j41(1,"ion-label",20)(2,"div",21),e.EFF(3),e.nI1(4,"date"),e.k0s(),e.j41(5,"div",22)(6,"span"),e.EFF(7),e.nI1(8,"date"),e.k0s(),e.j41(9,"span",23),e.EFF(10),e.nI1(11,"currency"),e.j41(12,"div",24),e.EFF(13),e.k0s()()()()()}if(2&i){const o=l.$implicit;e.R7$(3),e.JRh(e.i5U(4,5,o.createdAt,"HH:mm")),e.R7$(4),e.JRh(e.i5U(8,8,o.createdAt,"yyyy-MM-dd")),e.R7$(3),e.SpI(" ",e.bMT(11,11,o.price)," "),e.R7$(2),e.Y8G("ngClass",o.paid?"paid":"not-paid"),e.R7$(),e.SpI(" ",o.paid?"PAID":"NOT PAID"," ")}}let X=(()=>{var i;class l{constructor(n,t,r,c,_){this.location=n,this.router=t,this.dataService=r,this.loadingController=c,this.route=_,this.tableOrders=[],this.modalCtrl=(0,e.WQX)(a.W3)}ngOnInit(){var n;const t=this.router.getCurrentNavigation();this.selectedTable=null==t||null===(n=t.extras.state)||void 0===n?void 0:n.table}ngAfterViewInit(){this.fetchTableOrders()}goBack(){this.location.back()}fetchTableOrders(){var n=this;return(0,d.A)(function*(){const t=yield n.loadingController.create({message:"Loading orders..."});yield t.present();const r=n.route.snapshot.paramMap.get("id");if(!r)return console.error("No table ID found in route."),void(yield t.dismiss());var c;n.dataService.getTableOrders(r).pipe((0,h.j)(()=>{t.dismiss()})).subscribe({next:(c=(0,d.A)(function*(_){n.tableOrders=_.data.items||[]}),function(B){return c.apply(this,arguments)}),error:function(){var c=(0,d.A)(function*(_){console.error(_)});return function(B){return c.apply(this,arguments)}}()})})()}goToOrderDetails(n){this.router.navigate(["/order",n.id],{state:{table:this.selectedTable,order:n}})}openAddOrderModal(){var n=this;return(0,d.A)(function*(){const t=yield n.modalCtrl.create({component:D,breakpoints:[1],initialBreakpoint:1,handle:!1,cssClass:"custom-sheet-modal"});yield t.present();const{data:r}=yield t.onDidDismiss();console.log(r)})()}getStatusClassName(n){return n.replace(/ /g,"")}openTransferOrderModal(){var n=this;return(0,d.A)(function*(){const t=yield n.modalCtrl.create({component:P,componentProps:{orders:n.tableOrders},breakpoints:[1],initialBreakpoint:1,handle:!1,cssClass:"custom-sheet-modal"});yield t.present();const{data:r}=yield t.onDidDismiss();null!=r&&r.transferred&&n.fetchTableOrders()})()}openPayOrderModal(){var n=this;return(0,d.A)(function*(){const t=yield n.modalCtrl.create({component:O,componentProps:{orders:n.tableOrders.filter(c=>!c.paid)},breakpoints:[1],initialBreakpoint:1,handle:!1,cssClass:"custom-sheet-modal"});yield t.present();const{data:r}=yield t.onDidDismiss();null!=r&&r.paid&&n.fetchTableOrders()})()}}return(i=l).\u0275fac=function(n){return new(n||i)(e.rXU(Y.aZ),e.rXU(f.Ix),e.rXU(m.u),e.rXU(a.Xi),e.rXU(f.nX))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-table-details"]],decls:25,vars:5,consts:[["fullscreen","",1,"table-details-content"],["fill","outline","shape","round",1,"light-button","back-btn",3,"click"],["name","chevron-back-outline","slot","icon-only"],[1,"header-container"],[1,"header-card"],[1,"table-info"],[1,"status"],[1,"status-dot",3,"ngClass"],["class","user",4,"ngIf"],[1,"table-name"],[1,"sheet-container"],[2,"display","flex","justify-content","space-between","align-items","center","margin-bottom","16px","color","black"],[3,"click"],["mode","ios"],["detail","true",3,"click",4,"ngFor","ngForOf"],["slot","fixed","vertical","bottom","horizontal","end"],["name","add"],[1,"user"],["name","person-circle-outline"],["detail","true",3,"click"],[1,"order-label"],[1,"order-time"],[1,"order-meta"],[2,"display","flex","gap","8px"],[3,"ngClass"]],template:function(n,t){1&n&&(e.j41(0,"ion-content",0)(1,"ion-button",1),e.bIt("click",function(){return t.goBack()}),e.nrm(2,"ion-icon",2),e.k0s(),e.j41(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6),e.nrm(7,"span",7),e.EFF(8),e.k0s(),e.DNE(9,N,3,1,"div",8),e.k0s(),e.j41(10,"div",9),e.EFF(11),e.k0s()()(),e.j41(12,"div",10)(13,"div",11),e.EFF(14," Orders "),e.j41(15,"div")(16,"ion-button",12),e.bIt("click",function(){return t.openTransferOrderModal()}),e.EFF(17,"Transfer"),e.k0s(),e.j41(18,"ion-button",12),e.bIt("click",function(){return t.openPayOrderModal()}),e.EFF(19,"Pay"),e.k0s()()(),e.j41(20,"ion-list",13),e.DNE(21,S,14,13,"ion-item",14),e.k0s()(),e.j41(22,"ion-fab",15)(23,"ion-fab-button",12),e.bIt("click",function(){return t.openAddOrderModal()}),e.nrm(24,"ion-icon",16),e.k0s()()()),2&n&&(e.R7$(7),e.Y8G("ngClass",t.getStatusClassName(t.selectedTable.status)),e.R7$(),e.SpI(" ",t.selectedTable.status," "),e.R7$(),e.Y8G("ngIf",t.selectedTable.user),e.R7$(2),e.JRh(t.selectedTable.label),e.R7$(10),e.Y8G("ngForOf",t.tableOrders))},dependencies:[s.MD,s.YU,s.Sq,s.bT,s.oe,s.vh,a.W9,a.Jm,a.iq,a.nf,a.uz,a.he,a.Q8,a.YW],styles:[".table-details-content[_ngcontent-%COMP%]{--padding-top: 0;position:relative}.table-details-content[_ngcontent-%COMP%]   ion-button.back-btn[_ngcontent-%COMP%]{position:absolute;top:16px;left:16px;z-index:1000}.table-details-content[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]{position:absolute;top:0;width:100%;background:linear-gradient(to top,#0c4a6e,#06b6d4)}.table-details-content[_ngcontent-%COMP%]   .header-card[_ngcontent-%COMP%]{color:#000;position:relative;z-index:2;margin:40px auto 0;width:50%;max-width:500px;background:#fff;border-radius:10px;padding:16px;box-shadow:0 4px 16px #0003;text-align:center;display:flex;flex-direction:column;gap:32px}.table-details-content[_ngcontent-%COMP%]   .header-card[_ngcontent-%COMP%]   .table-info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.table-details-content[_ngcontent-%COMP%]   .header-card[_ngcontent-%COMP%]   .table-info[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{display:flex;align-items:center;font-weight:700;text-transform:capitalize;gap:8px}.table-details-content[_ngcontent-%COMP%]   .header-card[_ngcontent-%COMP%]   .table-info[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]   .status-dot[_ngcontent-%COMP%]{width:10px;height:10px;border-radius:50%;background-color:#666}.table-details-content[_ngcontent-%COMP%]   .header-card[_ngcontent-%COMP%]   .table-info[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]   .status-dot.available[_ngcontent-%COMP%]{background-color:#10dc60}.table-details-content[_ngcontent-%COMP%]   .header-card[_ngcontent-%COMP%]   .table-info[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]   .status-dot.notavailable[_ngcontent-%COMP%]{background-color:#eb445a}.table-details-content[_ngcontent-%COMP%]   .header-card[_ngcontent-%COMP%]   .table-info[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]   .status-dot.reserved[_ngcontent-%COMP%]{background-color:#ffc409}.table-details-content[_ngcontent-%COMP%]   .header-card[_ngcontent-%COMP%]   .table-name[_ngcontent-%COMP%]{font-size:22px;font-weight:700}.table-details-content[_ngcontent-%COMP%]   .sheet-container[_ngcontent-%COMP%]{position:absolute;left:0;right:0;bottom:0;top:100px;background:#e1eff4;border-top-left-radius:24px;border-top-right-radius:24px;padding:64px 16px 80px;overflow-y:auto;z-index:1}.table-details-content[_ngcontent-%COMP%]   .sheet-container[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--background: white;--color: black}.table-details-content[_ngcontent-%COMP%]   .sheet-container[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{border-radius:8px;--background: white;background:#fff!important}.table-details-content[_ngcontent-%COMP%]   .sheet-container[_ngcontent-%COMP%]   .order-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.table-details-content[_ngcontent-%COMP%]   .sheet-container[_ngcontent-%COMP%]   .order-label[_ngcontent-%COMP%]   .order-time[_ngcontent-%COMP%]{font-size:20px}.table-details-content[_ngcontent-%COMP%]   .sheet-container[_ngcontent-%COMP%]   .order-label[_ngcontent-%COMP%]   .order-meta[_ngcontent-%COMP%]{display:flex;flex-direction:column;font-size:12px;gap:8px}.table-details-content[_ngcontent-%COMP%]   ion-fab-button[_ngcontent-%COMP%]{--background: #9edbf7;--color: black}.table-details-content[_ngcontent-%COMP%]   .paid[_ngcontent-%COMP%]{color:green;font-weight:700}.table-details-content[_ngcontent-%COMP%]   .not-paid[_ngcontent-%COMP%]{color:red;font-weight:700}"]}),l})()}}]);